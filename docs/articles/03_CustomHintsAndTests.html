<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>3 Custom Hints and Tests • RTutor</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="3 Custom Hints and Tests">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">RTutor</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2019.7.22</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Manuals
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/01_RTutorOverview.html">1 RTutor Overview</a>
    </li>
    <li>
      <a href="../articles/02_ElementsSolutionFile.html">2 Elements of a Solution File</a>
    </li>
    <li>
      <a href="../articles/03_CustomHintsAndTests.html">3 Custom Hints and Tests</a>
    </li>
    <li>
      <a href="../articles/04_Deploy%20Problem%20Sets%20as%20Package%20on%20Github.html">4 Deploy RTutor Problem Set as a Package on Github</a>
    </li>
    <li>
      <a href="../articles/05_Deploy%20problem%20set%20on%20shinyapps.io.html">5 Deploy a problem set on shinyapps.io</a>
    </li>
    <li>
      <a href="../articles/FAQ_and_Sneaky_Errors.html">Sneaky Errors</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/skranz/RTutor">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>3 Custom Hints and Tests</h1>
            
      
      
      <div class="hidden name"><code>03_CustomHintsAndTests.Rmd</code></div>

    </div>

    
    
<div id="customizing-hints-and-tests" class="section level1">
<h1 class="hasAnchor">
<a href="#customizing-hints-and-tests" class="anchor"></a>Customizing Hints and Tests</h1>
<div id="automatic-hints-and-tests" class="section level2">
<h2 class="hasAnchor">
<a href="#automatic-hints-and-tests" class="anchor"></a>Automatic Hints and Tests</h2>
<p>I put a lot of effort into writing sensible automatic tests and hints for RTutor. Hence, in most cases problem set tasks without customized hints or tests should yield a decent experience for users.</p>
<p>For an example of the automatic hints, consider a chunk were students shall write a dplyr pipe</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode s"><code class="sourceCode gnuassembler"><a class="sourceLine" id="cb1-1" title="1"><span class="co">#&lt; task</span></a>
<a class="sourceLine" id="cb1-2" title="2">dat = tibble(a = sample(<span class="kw">1:</span><span class="dv">4</span>,<span class="dv">100</span>, replace=TRUE), x=runif(<span class="dv">100</span>,<span class="dv">0</span>,a))</a>
<a class="sourceLine" id="cb1-3" title="3"><span class="co">#&gt;</span></a>
<a class="sourceLine" id="cb1-4" title="4">dat %&gt;%</a>
<a class="sourceLine" id="cb1-5" title="5">  group_by(a) %&gt;%</a>
<a class="sourceLine" id="cb1-6" title="6">  summarize(mean_x = mean(x)) %&gt;%</a>
<a class="sourceLine" id="cb1-7" title="7">  arrange(-mean_x)</a></code></pre></div>
<p>If the user writes the following wrong code</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode s"><code class="sourceCode gnuassembler"><a class="sourceLine" id="cb2-1" title="1">dat = tibble(a = sample(<span class="kw">1:</span><span class="dv">4</span>,<span class="dv">100</span>, replace=TRUE), x=runif(<span class="dv">100</span>,<span class="dv">0</span>,a))</a>
<a class="sourceLine" id="cb2-2" title="2">dat %&gt;%</a>
<a class="sourceLine" id="cb2-3" title="3">  group_by(a) %&gt;%</a>
<a class="sourceLine" id="cb2-4" title="4">  summarize(mean_x = <span class="dv">2</span>*mean(x)) %&gt;%</a>
<a class="sourceLine" id="cb2-5" title="5">  arrange(-mean_x)</a></code></pre></div>
<p>The test fails with a not very informative message:</p>
<pre><code>Error: 
You have not yet entered all correct commands in chunk 1.
For a hint, type hint() in the console and press Enter.</code></pre>
<p>When typing <code><a href="../reference/hint.html">hint()</a></code> the automatic hint shows the more detailed error analysis:</p>
<pre><code>In your following pipe chain, I detect wrong results starting after element 3, the call to 'summarize':

dat %&gt;%
   group_by(a) %&gt;%
   summarize(mean_x = 2 * mean(x)) %&gt;% !! WRONG RESULTS !!
   arrange(-mean_x)</code></pre>
<p>There are cases were you may want to customize your hints. Sometimes the automatic hints may reveal to much, sometimes they may reveal to little, or sometimes you just want to really polish your problem set and want hints with nicer text.</p>
<p>There are also (in my experience substantially fewer) cases, in which you want to adapt the automatic correctness checks. We will describe test customization further below.</p>
</div>
<div id="analyse-students-submissions-to-improve-hints" class="section level2">
<h2 class="hasAnchor">
<a href="#analyse-students-submissions-to-improve-hints" class="anchor"></a>Analyse students’ submissions to improve hints</h2>
<p>In general it is hard to predict where and how hints should be customized. If you use your problem sets in a course in which students submit there solution, take a look at the README.md of the companion package <a href="https://github.com/skranz/RTutorSAGI">RTutorSAGI</a>. It describes how you can analyse log files contained in the submission to detect and improve problematic tasks were many students got stuck. This allows for a nice iterative improvement process for your problem sets.</p>
</div>
</div>
<div id="hints" class="section level1">
<h1 class="hasAnchor">
<a href="#hints" class="anchor"></a>Hints</h1>
<div id="custom-hints" class="section level2">
<h2 class="hasAnchor">
<a href="#custom-hints" class="anchor"></a>Custom hints</h2>
<p>Consider the following specification in a problem set solution file. The user shall store the mean of a variable <code>x</code> in the variable <code>m</code> and then show <code>m</code>.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode s"><code class="sourceCode gnuassembler"><a class="sourceLine" id="cb5-1" title="1">m = mean(x)</a>
<a class="sourceLine" id="cb5-2" title="2"><span class="co">#&lt; hint</span></a>
<a class="sourceLine" id="cb5-3" title="3">cat(<span class="st">"Use Google, e.g. search for 'R compute mean'."</span>)</a>
<a class="sourceLine" id="cb5-4" title="4"><span class="co">#&gt;</span></a>
<a class="sourceLine" id="cb5-5" title="5">m</a>
<a class="sourceLine" id="cb5-6" title="6"><span class="co">#&lt; hint</span></a>
<a class="sourceLine" id="cb5-7" title="7">cat(<span class="st">"Great, you computed m. But read the task exactly, you shall also show it. Just type m in your code."</span>)</a>
<a class="sourceLine" id="cb5-8" title="8"><span class="co">#&gt;</span></a></code></pre></div>
<p>The <code>#&lt; hint</code> blocks describe the code that is run if the user calls <code><a href="../reference/hint.html">hint()</a></code> after the expression directly above was not solved correctly.</p>
<p>We have a different hint for each of the two expressions. Such a custom hint block overwrites the automatic hints, which won’t be shown. A motivation to overwrite the first automatic hint is that it makes the solution too simple by already revealing the function name <code>mean</code> (although not the argument <code>y</code>). Here the custom hint pushes students to learn the extremely useful method to solve problems when coding: search the internet.</p>
<p>The second custom hint is not really neccessary though, since the automatic hint essentially reveals the same info. We can also set custom hints only for some expressions in a chunk, e.g.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode s"><code class="sourceCode gnuassembler"><a class="sourceLine" id="cb6-1" title="1">m = mean(x)</a>
<a class="sourceLine" id="cb6-2" title="2"><span class="co">#&lt; hint</span></a>
<a class="sourceLine" id="cb6-3" title="3">cat(<span class="st">"Use Google, e.g. search for 'R compute mean'."</span>)</a>
<a class="sourceLine" id="cb6-4" title="4"><span class="co">#&gt;</span></a>
<a class="sourceLine" id="cb6-5" title="5">m</a></code></pre></div>
</div>
<div id="adaptive-custom-hints" class="section level2">
<h2 class="hasAnchor">
<a href="#adaptive-custom-hints" class="anchor"></a>Adaptive Custom Hints</h2>
<p>The hints described above always show the same message, independent of the student’s code. Automatic hints already adapt to the student’s input and from RTutor version 2019.07.23 it is also more simple to make custom hints adaptive.</p>
<p>Here is an example, where the task is to assign the first 100 square numbers to the variable <code>z</code>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode s"><code class="sourceCode gnuassembler"><a class="sourceLine" id="cb7-1" title="1">z = <span class="kw">1:</span><span class="dv">100</span> * <span class="kw">1:</span><span class="dv">100</span></a>
<a class="sourceLine" id="cb7-2" title="2"><span class="co">#&lt; hint</span></a>
<a class="sourceLine" id="cb7-3" title="3">if (true(identical(z,<span class="kw">1:</span><span class="dv">10</span>*<span class="kw">1:</span><span class="dv">10</span>))) {</a>
<a class="sourceLine" id="cb7-4" title="4">  cat(<span class="st">"Huh, you made a common mistake. Read the task precisely.</span></a>
<a class="sourceLine" id="cb7-5" title="5">  You shall assign to z the first <span class="dv">100</span> square numbers,</a>
<a class="sourceLine" id="cb7-6" title="6">not only all square numbers that are less or equal to <span class="dv">100</span><span class="st">")</span></a>
<a class="sourceLine" id="cb7-7" title="7">} else if (true(length(z)!=<span class="dv">100</span>)) {</a>
<a class="sourceLine" id="cb7-8" title="8">  cat(<span class="st">"Your variable z must have 100 elements,</span></a>
<a class="sourceLine" id="cb7-9" title="9">  but in your solution z has<span class="st">", length(z),"</span>elements.<span class="st">")  </span></a>
<a class="sourceLine" id="cb7-10" title="10">} else {</a>
<a class="sourceLine" id="cb7-11" title="11">  cat(<span class="st">"There is a simple one-line formula to compute the first 100 square numbers.</span></a>
<a class="sourceLine" id="cb7-12" title="12">  Just combine what you have learned in exercise <span class="dv">2</span> f) and in exercise <span class="dv">3</span> b).</a>
<a class="sourceLine" id="cb7-13" title="13"><span class="st">")</span></a>
<a class="sourceLine" id="cb7-14" title="14">}</a>
<a class="sourceLine" id="cb7-15" title="15"><span class="co">#&gt;</span></a></code></pre></div>
<p>The code in the hint block will be evaluated in an environment in which all variables defined in earlier solved chunks are known. Also (at least if you use the default tests) the student’s current code has been already be evaluated in the hint environment.</p>
<p>This means whether whether <code>z</code> exists in the hint environment depends on whether the user has defined it in her solution for the chunk or not. The function <code>true</code> is a robust version of <code>isTRUE</code> that never throws an error. This means even if <code>z</code> does not exist and thus the expression cannot be evaluated, we just get a <code>FALSE</code>.</p>
</div>
<div id="add_to_hint-blocks-to-combine-automatic-and-custom-hints" class="section level2">
<h2 class="hasAnchor">
<a href="#add_to_hint-blocks-to-combine-automatic-and-custom-hints" class="anchor"></a>add_to_hint blocks to combine automatic and custom hints</h2>
<p>There are many situations were you want to keep the automatic hint but just add some additional hint. Then write your hint code in an <code>add_to_hint</code>block.</p>
<p>Here is an example for an adaptive custom hint in an <code>#&lt; add_to_hint</code> block from one of my problem sets:</p>
<blockquote>
<p>Task: Using the command <code>cbind</code>, generate the matrix X of explanatory variable whose first column consists of 1 and the second column consists of p.</p>
</blockquote>
<div class="sourceCode" id="cb8"><pre class="sourceCode s"><code class="sourceCode gnuassembler"><a class="sourceLine" id="cb8-1" title="1">X = cbind(<span class="dv">1</span>,p)</a>
<a class="sourceLine" id="cb8-2" title="2"><span class="co">#&lt; add_to_hint</span></a>
<a class="sourceLine" id="cb8-3" title="3">if (exists(<span class="st">"x"</span>) &amp; !exists(<span class="st">"X"</span>)) {</a>
<a class="sourceLine" id="cb8-4" title="4">  cat(<span class="st">"It looks like you assigned the value to 'x' (lowercase), but you shall assign the value to 'X' (uppercase)."</span>)</a>
<a class="sourceLine" id="cb8-5" title="5">}</a>
<a class="sourceLine" id="cb8-6" title="6"><span class="co">#&gt;</span></a></code></pre></div>
<p>Looking at the logs of students’ solution, it became apparent that many mixed up X with x. The automatic hint did not help for this problem, yet in other cases, it was helpful. So I just wanted to add this specific custom hint to the automatic hint.</p>
</div>
<div id="hints-at-the-beginning-of-chunk" class="section level2">
<h2 class="hasAnchor">
<a href="#hints-at-the-beginning-of-chunk" class="anchor"></a>Hints at the beginning of chunk</h2>
<p>If you place a hint at the beginning of a chunk, the hint text will be added to all the hints of the individual commands.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode s"><code class="sourceCode gnuassembler"><a class="sourceLine" id="cb9-1" title="1"><span class="co">#&lt; hint</span></a>
<a class="sourceLine" id="cb9-2" title="2">cat(<span class="st">"This hint will be added to the automatic hints</span></a>
<a class="sourceLine" id="cb9-3" title="3">of all commands below.<span class="st">")</span></a>
<a class="sourceLine" id="cb9-4" title="4"><span class="co">#&gt;</span></a>
<a class="sourceLine" id="cb9-5" title="5">x = <span class="kw">1:</span><span class="dv">10</span></a>
<a class="sourceLine" id="cb9-6" title="6">y = x^<span class="dv">2</span></a></code></pre></div>
</div>
</div>
<div id="tests" class="section level1">
<h1 class="hasAnchor">
<a href="#tests" class="anchor"></a>Tests</h1>
<div id="adapting-tests-of-students-solution" class="section level2">
<h2 class="hasAnchor">
<a href="#adapting-tests-of-students-solution" class="anchor"></a>Adapting tests of student’s solution</h2>
<p>I tried my best to automatically test whether the student entered a correct solution or not. Yet, sometimes we need to manually include specific variants of tests in the solution file. Here is an example for such a manual test:</p>
<pre><code>    #' b) Save in the variable u a vector of 4 different numbers
    u = c(3,6,7,99)  
    #&lt; test
    check.variable("u",c(3,6,7,99),values=FALSE)
    #&gt;</code></pre>
<p>The automatic test would check whether one of the following two conditions is meet:</p>
<ul>
<li>u has the same value than in the solution. This means u=c(2,5,6,98)+1 would also pass as correct solution</li>
<li>u is generated by an equivalent call as in the solution (equivalent means the function name should be the same and the arguments should have the same value). This is useful if the solution is a call that generates a random variable like x = runif(1).</li>
</ul>
<p>Yet in this example, the automatic test is too restrictive. The student shall just generate some arbitrary vector consisting of 4 numbers. The block</p>
<pre><code>    #&lt; test
    check.variable("u",c(3,6,7,99),values=FALSE)
    #&gt;</code></pre>
<p>replaces the automatic test with a test that just checks whether a variable u exists, and has the same length and class (numeric or integer) as an example solution c(3,6,7,99).</p>
<p>RTutor has a series of helper functions for such manual tests. Take a look at the package help for a documentation.</p>
</div>
<div id="specifying-parameters-of-default-tests" class="section level2">
<h2 class="hasAnchor">
<a href="#specifying-parameters-of-default-tests" class="anchor"></a>Specifying parameters of default tests</h2>
<p>By default, tests are generated that call either <code>check.call</code> (a statement that does not assign a variable), <code>check.assign</code> (if a value is assigned to a variable), or <code>check.function</code> (if a function is generated). You can take a look at the generated _struc.r file to see which default and manual tests are generated. All test function have a number of arguments, that allow to customize the tests. A block starting with the line <code>#&lt; test_arg</code> allows you to change the arguments of a default test. Consider the following example:</p>
<pre><code>    plot(x=p,y=q,main="A plot", xlab="Prices")
    #&lt; test_arg
      ignore.arg = c("main","xlab")
      allow.extra.arg=TRUE
    #&gt;</code></pre>
<p>The <code>#&lt; test_arg</code> block customizes the parameters <code>ignore.arg</code> and <code>allow.extra.arg</code> of the <code>check.call</code> function. The parameter <code>ignore.arg = c("main","xlab")</code> means that the student does not have to add these two arguments to the plot function or can use different values. The parameter <code>allow.extra.arg=TRUE</code> allows the student to specify additional arguments when calling plot, e.g. specifying a <code>ylab</code>. So essentially, it will now only be tested whether the x and y arguments of the plot are correct and any customization of the plot will still be considered a correct solution. See the help of <code>check.call</code> for a description of arguments.</p>
<p>If the sample solution assigns a value to a variable, the default function is <code>check.assign</code>. See its help file for possible arguments.</p>
</div>
<div id="testing-a-function-written-by-the-student" class="section level2">
<h2 class="hasAnchor">
<a href="#testing-a-function-written-by-the-student" class="anchor"></a>Testing a function written by the student</h2>
<p>Sometimes you may ask to write a function in the problem set. Here is an example, how you could construct a solution file. In the exercise the student is asked to complete a manual function <code>ols</code> that shall compute an ols estimate:</p>
<pre><code>    #&lt; task_notest
    ols = function(y,X) {
      
      # enter code to compute beta.hat here ...
      
      return(as.numeric(beta.hat))
    }
    #&gt; task
    
    ols &lt;- function(y,X) {
      beta.hat = solve(t(X) %*% X) %*% t(X) %*% y
      return(as.numeric(beta.hat))
    }
    #&lt; test_arg
      ols(c(100,50,20,60),cbind(1,c(20,30,15,20)))
      hint.name="ols"
    #&gt;
    #&lt; hint
    display("Just insert inside the function ols the code to compute beta.hat",
            "from y and X. You have developed this code in Exercise 1.")
    #&gt;</code></pre>
<p>First, we have a <code>#&lt; task_notest</code> block that specifies an unfinished function that will be given to the student. Afterward, we have an example of a correct function <code>ols</code>. Then the <code>#&lt; test_arg</code> block specifies parameters for the automatic test <code>check.function</code>. The unnamed parameter</p>
<pre><code>    ols(c(100,50,20,60),cbind(1,c(20,30,15,20)))</code></pre>
<p>Specifies a test call. <code>check.function</code> will run this test call for the official solution and the student’s solution. The test will only pass if both versions return the same value. The parameter hint.name specifies a manual name for a hint, since currently no automatic hints are generated for function creation (hopefully that will improve in later versions of RTutor.) Finally, the <code>#&lt; hint ols</code> specifies what the hint <code>ols</code> shows.</p>
</div>
<div id="testing-a-function-that-generates-random-variables" class="section level2">
<h2 class="hasAnchor">
<a href="#testing-a-function-that-generates-random-variables" class="anchor"></a>Testing a function that generates random variables</h2>
<p>In the moment there is relatively little support to check user written functions that generate random variables, and I hope this will improve with newer versions of RTutor. What currently can be done to compare the results of the student’s function and the official solution using the same random seed.</p>
<p>Here is an example:</p>
<pre><code>    a) Write a function `runif.square` with parameters n, min and max
    that generates n random variables that are the square of variables
    that are uniform distributed on the interval from min to max.
    
    ```{r}
    runif.square = function(n,min,max) {
      runif(n,min,max)^2
    }
    #&lt; test_arg
      with.random.seed(runif.square(n=20,min=4,max=9), seed=12345)
    #&gt;
    ```</code></pre>
<p>Our test call is now embedded in the function with.random.seed that calls the function with a fixed random seed. The test check.function only passes if the students function and official solution return the same value when called with the same random seed.</p>
<p>If a function requires simulation of more than one random number, this testing procedure only works if the student draws the random numbers in the same order than the official solution. This means your task should specify already a lot of structure for the function and tell the student not to draw any additional random variables inside the function.</p>
</div>
<div id="test-if-variables-that-satisfy-specific-conditions-are-generated" class="section level2">
<h2 class="hasAnchor">
<a href="#test-if-variables-that-satisfy-specific-conditions-are-generated" class="anchor"></a>Test if variables that satisfy specific conditions are generated</h2>
<p>Consider the following example:</p>
<pre><code>    a) Specify a number of observations T&gt;=5
    
    ```{r }
    T = 100
    #&lt; test
      check.variable("T",100,values=FALSE)
      holds.true(T&gt;=5, failure.message="You must set T&gt;=5.")
    #&gt;
    ```</code></pre>
<p>The default test <code>check.assign</code> would only pass if the student would set <code>T=100</code>, but any T&gt;=5 shall be considered correct. So we first replace the default test by a <code>check.variable</code> test that checks whether a numeric variable T of length 1 exists. Then we add another manual test <code>holds.true</code> that checks whether T&gt;=5 holds. Note that using the holds.true test without first checking that a numeric, variable T of length 1 exists can cause the holds.true test to crash.</p>
</div>
</div>
<div id="designing-computations-with-many-steps" class="section level1">
<h1 class="hasAnchor">
<a href="#designing-computations-with-many-steps" class="anchor"></a>Designing computations with many steps</h1>
<p>Sometimes you want to ask students to perform computations that will usually require several intermediate steps. Two somewhat opposite ways of implementing such multistep computations in a problem set would be the following:</p>
<ol style="list-style-type: lower-roman">
<li>Only check the final result and let the student figure out the intermediate steps herself.</li>
<li>Include all intermediate steps as part of the problem set</li>
</ol>
<p>A <code>#&lt; compute ... #&gt;</code> block allows an intermediate approach. Here is an example from a problem set of mine that asks a student to compute a matrix of choice probabilities from a conditional logit model.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode s"><code class="sourceCode gnuassembler"><a class="sourceLine" id="cb17-1" title="1">    <span class="co">#&lt; compute P</span></a>
<a class="sourceLine" id="cb17-2" title="2">    </a>
<a class="sourceLine" id="cb17-3" title="3">    <span class="co">## Take a look at the formula for the choice probabilities P.nj of the logit discrete choice model in the slides.</span></a>
<a class="sourceLine" id="cb17-4" title="4">    </a>
<a class="sourceLine" id="cb17-5" title="5">    <span class="co">## Let exp.V be a matrix that contains the numerators of P.nj (use scale as sigma in your formula)</span></a>
<a class="sourceLine" id="cb17-6" title="6">    exp.V = exp(V/scale)</a>
<a class="sourceLine" id="cb17-7" title="7">    </a>
<a class="sourceLine" id="cb17-8" title="8">    <span class="co">## Let sum.exp.V be a vector that contains for each person n the denominator in P.nj. You can use the function 'rowSums'. </span></a>
<a class="sourceLine" id="cb17-9" title="9">    sum.exp.V = rowSums(exp.V)</a>
<a class="sourceLine" id="cb17-10" title="10">    </a>
<a class="sourceLine" id="cb17-11" title="11">    <span class="co">## Compute P as ratio of the numerator and the denominator</span></a>
<a class="sourceLine" id="cb17-12" title="12">    P = exp.V / sum.exp.V</a>
<a class="sourceLine" id="cb17-13" title="13">    <span class="co">#&gt;</span></a></code></pre></div>
<p>The solution will pass as correct if the final values of <code>P</code> are correct. The student is not obliged to perform the particular intermediate computations like <code>exp.V</code>. Yet, if the student has not yet correctly computed <code>P</code> and types <code><a href="../reference/hint.html">hint()</a></code>, the hint function tries to steer the student step by step through the sample solution described in the block. The comments starting with <code>##</code> will be transformed into text that will be shown in the hint.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li>
<a href="#customizing-hints-and-tests">Customizing Hints and Tests</a><ul class="nav nav-pills nav-stacked">
<li><a href="#automatic-hints-and-tests">Automatic Hints and Tests</a></li>
      <li><a href="#analyse-students-submissions-to-improve-hints">Analyse students’ submissions to improve hints</a></li>
      </ul>
</li>
      <li>
<a href="#hints">Hints</a><ul class="nav nav-pills nav-stacked">
<li><a href="#custom-hints">Custom hints</a></li>
      <li><a href="#adaptive-custom-hints">Adaptive Custom Hints</a></li>
      <li><a href="#add_to_hint-blocks-to-combine-automatic-and-custom-hints">add_to_hint blocks to combine automatic and custom hints</a></li>
      <li><a href="#hints-at-the-beginning-of-chunk">Hints at the beginning of chunk</a></li>
      </ul>
</li>
      <li>
<a href="#tests">Tests</a><ul class="nav nav-pills nav-stacked">
<li><a href="#adapting-tests-of-students-solution">Adapting tests of student’s solution</a></li>
      <li><a href="#specifying-parameters-of-default-tests">Specifying parameters of default tests</a></li>
      <li><a href="#testing-a-function-written-by-the-student">Testing a function written by the student</a></li>
      <li><a href="#testing-a-function-that-generates-random-variables">Testing a function that generates random variables</a></li>
      <li><a href="#test-if-variables-that-satisfy-specific-conditions-are-generated">Test if variables that satisfy specific conditions are generated</a></li>
      </ul>
</li>
      <li><a href="#designing-computations-with-many-steps">Designing computations with many steps</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Sebastian Kranz.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  


  <script type="text/javascript">
  var sc_project=12051162; 
  var sc_invisible=1; 
  var sc_security="60139410"; 
  </script>
  <script type="text/javascript"
  src="https://www.statcounter.com/counter/counter.js"
  async></script>
  <noscript><div class="statcounter"><a title="Web Analytics
  Made Easy - StatCounter" href="https://statcounter.com/"
  target="_blank"><img class="statcounter"
  src="https://c.statcounter.com/12051162/0/60139410/1/"
  alt="Web Analytics Made Easy -
  StatCounter"></a></div></noscript>
  
  
  </body>
</html>
