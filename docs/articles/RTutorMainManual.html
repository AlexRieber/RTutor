<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RTutor Main Manual • RTutor</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="RTutor Main Manual">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">RTutor</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2019.7.22</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Manuals
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/1%20RTutorOverview.html">1 RTutor Overview</a>
    </li>
    <li>
      <a href="../articles/2%20ElementsSolutionFile.html">2 Elements of a Solution File</a>
    </li>
    <li>
      <a href="../articles/3%20CustomHintsAndTests.html">3 Custom Hints and Tests</a>
    </li>
    <li>
      <a href="../articles/4%20Deploy%20Problem%20Sets%20as%20Package%20on%20Github.html">4 Deploy RTutor Problem Set as a Package on Github</a>
    </li>
    <li>
      <a href="../articles/5%20Deploy%20problem%20set%20on%20shinyapps.io.html">5 Deploy a problem set on shinyapps.io</a>
    </li>
    <li>
      <a href="../articles/RTutorMainManual.html">RTutor Main Manual</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/skranz/RTutor">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>RTutor Main Manual</h1>
                        <h4 class="author">Sebastian Kranz, Ulm University</h4>
            
            <h4 class="date">Version from 2019-03-26</h4>
      
      
      <div class="hidden name"><code>RTutorMainManual.Rmd</code></div>

    </div>

    
    
<div id="brief-overview" class="section level1">
<h1 class="hasAnchor">
<a href="#brief-overview" class="anchor"></a>Brief overview</h1>
<div id="rtutor" class="section level2">
<h2 class="hasAnchor">
<a href="#rtutor" class="anchor"></a>RTutor</h2>
<p>RTutor is an R package that allows to develop interactive R problem sets. The interactive tasks directly test a student’s solution and provide hints if not everything is correct. Unlike purely web-based approaches, as e.g. <a href="https://www.datacamp.com/" class="uri">https://www.datacamp.com/</a>, RTutor allows off-line or on-line use. Problem sets can either be solved as RMarkdown files directly in RStudio or in a browser based interface powered by Shiny.</p>
<p>I have already used the markdown based RTutor problem sets in my Master courses at Ulm University, with quite positive feedback. Furthermore, I have supervised several students who have created very nice web-based RTutor problem sets that allow to replicate the analyses of well published economic articles in an interactive fashion.</p>
<p>Examples and additional material can be found on RTutor’s Github page:</p>
<p><a href="https://github.com/skranz/RTutor">https://github.com/skranz/RTutor</a></p>
<p>This document gives you an overview how to generate an interactive RTutor problem set. There is an extra document that gives additional advice for creating an RTutor problem set as part of a Bachelor or Master thesis.</p>
</div>
<div id="install-the-newest-version-of-rtutor" class="section level2">
<h2 class="hasAnchor">
<a href="#install-the-newest-version-of-rtutor" class="anchor"></a>Install the newest version of RTutor</h2>
<p>Installation instructions are given on RTutor’s Github page:</p>
<p><a href="https://github.com/skranz/RTutor">https://github.com/skranz/RTutor</a></p>
</div>
<div id="create-an-r-markdown-solution-file" class="section level2">
<h2 class="hasAnchor">
<a href="#create-an-r-markdown-solution-file" class="anchor"></a>Create an R Markdown solution file</h2>
<p>You create an interactive problem set by writing a solution file in R markdown format. In addition to the exercise description and a sample solution, the solution can contain manually adapted test, hints, or other commands like giving awards for a correct solution. Where no manual hints or tests are specified, RTutor will automatically generate tests and hints.</p>
<p>Some examples can be found <a href="https://github.com/skranz/RTutor/tree/master/inst/examples">here in the example directory on Gthub</a>.</p>
<p>Below is a simple example, that we would save as <code>Example_sol.Rmd</code>. We will explain its structure in detail in the chapter on solution files.</p>
<pre><code>    # Problemset Example
 
    Adapt the working directory below and (Run setup chunk in RStudio).
    This creates the problem set files and the sample solution from this solution file.
    
    #&lt; ignore
    ```{r "setup"}
    library(RTutor)
    setwd("C:/folder_of_this_solution_file")
    ps.name = "Example"; sol.file = paste0(ps.name,"_sol.Rmd")
    libs = c("ggplot2") # character vector of all packages you load in the problem set

    #name.rmd.chunks(sol.file)
    create.ps(sol.file=sol.file, ps.name=ps.name, libs=libs)
              
    # The following line directly shows the problem set 
    # in the browser
    show.ps(ps.name,launch.browser=TRUE,
      auto.save.code=FALSE,sample.solution=FALSE)

    ```
    #&gt;
    ## Exercise 1 -- Summary statistics
    
    a) We often want to compute some summary statistic of a vector.
    For example:
    ```{r "1 a)"}
    #&lt; task_notest
    x = 10:20
    # Computing the sum of x
    sum(x)
    #&gt;
    ```
    
    Now compute the mean of x.
    ```{r "1 a) 2"}
    mean(x)
    #&lt; hint
    display("Use Google, e.g. search for 'R compute mean'.")
    #&gt;
    ```
    
    #&lt; award "mean means mean"
    Well, in some occasions one can just guess the name of an R function.
    The function to compute the mean of a vector, or matrix is called 'mean'.
    Usually, it is much quicker to goggle than to guess function names, however.
    #&gt;
    
    
    ## Exercise 2 -- Computing with vectors
    a) Let y be a vector that contains the squared elements of x.
       Then show y.
    
    ```{r "2 a)"}
    #&lt; task
    x = 1:5
    #&gt;
    y = x^2
    y
    ```
    
    We can also plot in a problem set
    ```{r "2 a) 2"}
    library(ggplot2)
    qplot(x,y)
    ```
   
    
    #&lt; info "random numbers"
    Here are examples for generating random numbers
    ```{r "1 "}
    runif(3,0,100)
    sample(1:100,5)
    ```
    #&gt;
    
    Here is a quiz that will be nicely shown in the
    shiny version.
    #&lt; quiz "prime"
    question: What is the 'oddest' prime?
    sc:
        - 2*
        - 3
        - 5
        - 7
    success: Well, of course the answer is debatable...
    failure: Try again.
    #&gt;
    </code></pre>
<p>The problem set folder of the RTutor library contains some example solution files.</p>
</div>
<div id="generate-a-structure-file-and-empty-problem-set-for-students" class="section level2">
<h2 class="hasAnchor">
<a href="#generate-a-structure-file-and-empty-problem-set-for-students" class="anchor"></a>Generate a structure file and empty problem set for students</h2>
<p>Copy the solution file in some directory, and set is as working directory by changing in your solution file the line</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode s"><code class="sourceCode gnuassembler"><a class="sourceLine" id="cb2-1" title="1">    setwd(<span class="st">"C:/folder_of_this_solution_file"</span>)</a></code></pre></div>
<p>Open the solution file in RStudio and press Ctrl-Alt-R to run the first code chunk.</p>
<p>The call to</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode s"><code class="sourceCode gnuassembler"><a class="sourceLine" id="cb3-1" title="1">   create.ps(sol.file=sol.file, ps.name=ps.name, libs=libs)</a></code></pre></div>
<p>generates the following 3 files - Example.rps: a binary representation of the problem set structure - Example.Rmd: empty problem set in Rmarkdown format - Example_sample_solution.Rmd: A sample solution of the problem set in Rmarkdown format.</p>
<p>Note: If you uncomment the line</p>
<pre><code>#name.rmd.chunks(sol.file)</code></pre>
<p>in the example above, the chunk names of your solution file will be automatically set to the naming convention in your empty problem set. This helps to navigate your solution file. To see the changes in your solution file in your RStudio editor window, you have to change the editor tab to some other file and then move back to the tab of your solution file. Unfortunately, sometimes RStudio will have problems to run all chunks with Ctrl-Alt-R if you have automatically renamed chunk names. If that happens try starting RStudio again.</p>
</div>
<div id="solving-and-checking-the-problem-set" class="section level2">
<h2 class="hasAnchor">
<a href="#solving-and-checking-the-problem-set" class="anchor"></a>Solving and checking the problem set</h2>
<div id="solving-and-checking-in-the-browser" class="section level3">
<h3 class="hasAnchor">
<a href="#solving-and-checking-in-the-browser" class="anchor"></a>Solving and checking in the browser</h3>
<p>The call</p>
<pre><code><a href="../reference/show.ps.html">show.ps(ps.name,launch.browser=TRUE, load.sav=FALSE, sample.solution=FALSE, is.solved=FALSE)</a></code></pre>
<p>should start your default browser with an empty problem set and you should be able to solve it by working on the first code chunk and pressing the “check” button when finished. If you set the argument <code>sample.solution=TRUE</code> the problem set is already filled with your sample solution. If you also set <code>is.solved=FALSE</code> all code chunks are already automatically checked when you start the problem set. Pressing the ‘save’ button on some code chunk in your problem set, will save your solution. You can load your previous solution by call show.shiny.ps with the argument <code>load.sav=TRUE</code>. This may not work, however, if you have modified the solution file. The browser version of the problem set is still some work in progress. It should work, but has bugs and needs generally some improvement. Suggestions and bug reports are welcome.</p>
</div>
<div id="solving-and-checking-an-rmarkdown-file-in-rstudio" class="section level3">
<h3 class="hasAnchor">
<a href="#solving-and-checking-an-rmarkdown-file-in-rstudio" class="anchor"></a>Solving and checking an RMarkdown file in RStudio</h3>
<p>Alternatively a problem set can be solved by the students as an .Rmd file using RStudio. A student must copy the .rps file (the problem set structure generated by create.ps) and the empty problem set as R-markdown .Rmd file to a folder (same folder for both files) and open the .Rmd problem set file with RStudio.</p>
<p>The empty problem set files have some commands in the beginning, which are used to initialize RTutor and tell you, how you can check your solution. You first have to do 2 things:</p>
<ol style="list-style-type: decimal">
<li>Enter your user name at the specified place</li>
<li>Specify the folder in which you have copied this file</li>
</ol>
<p>You can then start solving the problem set. To check your solution, you just have to</p>
<ol style="list-style-type: decimal">
<li>Save your .rmd problem set file (Ctrl-S)</li>
<li>and then run all chunks of your problem set (Ctrl-Alt-R)</li>
</ol>
<p>How does it work? The header of the problem set file loads the package RTutor and calls the function check.problem.set, which runs automatic tests on the typed solution. If a test passes there is a success message. If a test fails, one gets an error message specifying in which part of the problem set the solution is not yet correct. Often one can type <code><a href="../reference/hint.html">hint()</a></code> in the R console to get a hint of how to solve the task that is not yet correct.</p>
<p>A student can type <code><a href="../reference/stats.html">stats()</a></code> to get some information of how much of the problem set he has already solved.</p>
<p>Before testing the empty problem set, open “Example_sample_solution.Rmd” and check if running all chunks (Ctrl-Alt-R) works correctly.</p>
</div>
</div>
<div id="iterative-development" class="section level2">
<h2 class="hasAnchor">
<a href="#iterative-development" class="anchor"></a>Iterative Development</h2>
<p>I guess the most natural way to develop a problem set is to repeatedly perform the following 3 steps:</p>
<ol style="list-style-type: decimal">
<li>Write and adapt your solution file and generate problem set files with Ctrl-Alt-R</li>
<li>Test whether the sample solution runs without problems</li>
<li>Try to solve the empty problem set yourself and check whether you should change tests, hints or exercise tasks in your solution file (Step 1).</li>
</ol>
<p><strong>Advice:</strong> When Note that when you change your solution file and create new empty problem sets, all problem set files will be overwritten. When you solve the empty problem set during your iterative development, this can be annoying since you must replicate your solution steps again. Therefore it can sometimes be useful to save your solved problem set file, e.g. “Example.Rmd”, under a different file name, like “Example_test.Rmd”. You then must also adapt the line</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode s"><code class="sourceCode gnuassembler"><a class="sourceLine" id="cb6-1" title="1">ps.file = <span class="ch">'E</span>xample.Rmd<span class="ch">' </span><span class="co"># this file</span></a></code></pre></div>
<p>in the beginning of your problem set file to that new file name. Of course, once you generate new exercises in your solution file you want to use the newly generated problem set file.</p>
</div>
<div id="distributing-your-problem-set" class="section level2">
<h2 class="hasAnchor">
<a href="#distributing-your-problem-set" class="anchor"></a>Distributing your problem set</h2>
<div id="simple-way-to-distribute-problem-sets-for-a-class" class="section level3">
<h3 class="hasAnchor">
<a href="#simple-way-to-distribute-problem-sets-for-a-class" class="anchor"></a>Simple way to distribute problem sets for a class</h3>
<p>Distributing the problem set for RStudio use is simple: just give your students the structure file as .rps and the empty problem set as .rmd file and tell them to install RStudio and all packages as described above. Students can then go on solving the problem set. You can also ask them to upload the solutions and possible the log files that track their solution process.</p>
<p>It is planned to implement more functionality that facilitates grading. The goal is to put all solutions in a directory and quickly generate tables that show the total percentage solved for all students.</p>
</div>
<div id="distribute-as-an-r-package-on-github" class="section level3">
<h3 class="hasAnchor">
<a href="#distribute-as-an-r-package-on-github" class="anchor"></a>Distribute as an R package on Github</h3>
<p>You can also create an R package that contains the problem set and host it on Github. This is described in more detail in this vignette:</p>
<p><a href="https://github.com/skranz/RTutor/blob/master/vignettes/Deploy%20Problem%20Sets%20as%20Package%20on%20Github.Rmd">https://github.com/skranz/RTutor/blob/master/vignettes/Deploy%20Problem%20Sets%20as%20Package%20on%20Github.Rmd</a></p>
</div>
<div id="host-online-as-a-shiny-app-on-shinyapps-io" class="section level3">
<h3 class="hasAnchor">
<a href="#host-online-as-a-shiny-app-on-shinyapps-io" class="anchor"></a>Host online as a shiny app on shinyapps.io</h3>
<p>You can also host web-based problem sets on shinyapps.io. Users can then solve them without having to install R. This is explained in this vignette: <a href="https://github.com/skranz/RTutor/blob/master/vignettes/Deploy%20problem%20set%20on%20shinyapps.io.Rmd">https://github.com/skranz/RTutor/blob/master/vignettes/Deploy%20problem%20set%20on%20shinyapps.io.Rmd</a></p>
<p>In principle, you could also host the problem set as an app on your own shiny server. However, this seems a substantial security risk since users can run arbitrary R code, which allows them to access your file system and generate disaster. I still have to figure out in how far <a href="https://github.com/jeroenooms/RAppArmor">RAppArmor</a> will allow safe usage on your own shiny servers. (I expect the RStudio team has figured out, how to make shinyapps.io save for them.)</p>
</div>
</div>
</div>
<div id="basic-elements-of-solution-files" class="section level1">
<h1 class="hasAnchor">
<a href="#basic-elements-of-solution-files" class="anchor"></a>Basic elements of solution files</h1>
<p>Let us dig a bit deeper into writing solution files. Solution files are .Rmd files that basically specify the task with sample solution. Code chunks can contain special comments to customize tests or hints.</p>
<div id="an-example-problem-set" class="section level2">
<h2 class="hasAnchor">
<a href="#an-example-problem-set" class="anchor"></a>An example problem set</h2>
<p>Let us start by just writing an exercise with solution, without yet adding some manual hints or tests. Here, we also neglect the code chunk before Exercise 1 that generates the problem set file.</p>
<pre><code>    # Problemset Example

    #&lt; ignore
    ```{r "Create problem set files"}
    setwd("C:/folder_of_this_solution_file")
    ps.name = "Example"; sol.file = paste0(ps.name,"_sol.Rmd")
    libs = NULL # character vector of all packages you load in the problem set
    create.ps(sol.file=sol.file, ps.name=ps.name, user.name=NULL,libs=libs)
    ```
    #&gt;
    
    ## Exercise 1 -- Summary statistics
    
    a) We often want to compute some summary statistic of a vector.
    For example:
    ```{r}
    #&lt; task
    x = 10:20
    # Computing the sum of x
    sum(x)
    #&gt;
    ```
    Now compute the mean of x.
    ```{r}
    mean(x)
    ```</code></pre>
<p>There are several keywords with special meaning. We have a problem set header starting with <code># Problemset</code> an exercise header starting with <code>## Exercise</code>. There is an <em>ignore block</em> starting with the line <code>#&lt; ignore</code> and ending with the line <code>#&gt;</code> that contains a code chunk to generate the problem set files from this solution. Code or text within ignore blocks will not become part of the problem set itself.</p>
<p>The description of the exercise is written as standard text, the code of your solution is put in R code chunks. The first code chunk contains a <em>task block</em> starting with <code>#&lt; task</code> and ending with <code>#&gt;</code> that specifies that this code will be shown to the students as part of the task description of the problem set.</p>
<p>You can already generate an empty problem set from this simple solution file by running Ctrl-Alt-R (see step 3 of part I). In the empty problem set file, places where students have to enter code will be marked by.</p>
<pre><code>    ```{r }
    # enter your code here ...
    ```</code></pre>
<p>We explain some syntax in detail more below.</p>
</div>
<div id="problemset-header" class="section level2">
<h2 class="hasAnchor">
<a href="#problemset-header" class="anchor"></a>Problemset header</h2>
<p>Please always start your solution file with a line</p>
<pre><code># Problemset Example</code></pre>
<p>where you replace <code>Example</code> with your own problem set name.</p>
</div>
<div id="exercise-header" class="section level2">
<h2 class="hasAnchor">
<a href="#exercise-header" class="anchor"></a>Exercise header</h2>
<p>A solution file consists of one or more exercises. An exercise starts with a line like</p>
<pre><code>## Exercise 1 -- Summary statistics</code></pre>
<p>You can pick any label for the exercise (it can include spaces). Yet, the recommend format for the exercise name is an exercise number, optionally followed by <code>--</code> and a short description, as in the example above.</p>
<p>It is necessary that your line <em>must</em> starts with</p>
<pre><code>## Exercise </code></pre>
</div>
<div id="parts-a-b" class="section level2">
<h2 class="hasAnchor">
<a href="#parts-a-b" class="anchor"></a>parts a), b) …</h2>
<p>RTutor recognizes lines in the exercise description that start with a) or ii) etc. as a “part” of an exercise and will use this information when automatically naming the code chunks in the empty problem set.</p>
</div>
<div id="task-blocks" class="section level2">
<h2 class="hasAnchor">
<a href="#task-blocks" class="anchor"></a>task blocks</h2>
<p>In our exercise the first code chunk shall be an example that will also be shown to the student. We make code being shown to students by wrapping it in a block starting with the line</p>
<pre><code>#&lt; task</code></pre>
<p>and ending with a line</p>
<pre><code>#&gt;</code></pre>
<p>Generate the problem set files and look at the empty problem set. You see that the code of the first chunk is now shown in the empty problem set while the second code chunk asks the student to enter her solution.</p>
<p>The interactive problem set can already be used. It automatically tests the solution and if the test fails since <code><a href="https://www.rdocumentation.org/packages/base/topics/mean">mean(x)</a></code> is not entered correctly, it gives the option to type <code><a href="../reference/hint.html">hint()</a></code> to get a hint.</p>
</div>
<div id="task_notest-blocks" class="section level2">
<h2 class="hasAnchor">
<a href="#task_notest-blocks" class="anchor"></a>task_notest blocks</h2>
<p>By default also the code as part of a task block will be tested for correctness when the student tests her solution. That is because future code may rely on the given code in the task and we want to make sure that the task code has not been accidentally changed by the user. If you don’t want to generate tests for the code given in the task you can do so by wrapping the code instead in a block starting with <code>#&lt; task_notest</code>, e.g.</p>
<pre><code>  #&lt; task_notest
    sum(1:5)
  #&gt;</code></pre>
</div>
<div id="fill_in-blocks" class="section level2">
<h2 class="hasAnchor">
<a href="#fill_in-blocks" class="anchor"></a>fill_in blocks</h2>
<p>Sometimes you would want to show your users a task where they should fill in code at some point, e.g.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode s"><code class="sourceCode gnuassembler"><a class="sourceLine" id="cb15-1" title="1">  <span class="co"># Enter the code at the ___</span></a>
<a class="sourceLine" id="cb15-2" title="2">  dat %&gt;% </a>
<a class="sourceLine" id="cb15-3" title="3">    <span class="co"># Filter all rows where x is larger than 5</span></a>
<a class="sourceLine" id="cb15-4" title="4">    filter(___) %&gt;%</a>
<a class="sourceLine" id="cb15-5" title="5">    <span class="co"># Sort in descending order in y</span></a>
<a class="sourceLine" id="cb15-6" title="6">    arrange(___)</a></code></pre></div>
<p>The following RTutor code allows to implement this in the easiest fashion. <code></code>{r} #&lt; hint cat(“Best add a chunk hint at the beginning, since automatic hints don’t work well, if the user code is not syntactically correct R code.”) #&gt;</p>
<p># Enter the code at the <strong><em> #&lt; fill_in # dat %&gt;% # # Filter all rows where x is larger than 5 # filter(</em></strong>) %&gt;% # # Sort in descending order in y # arrange(___) #&gt; dat %&gt;% # Filter all rows where x is larger than 5 filter(x&gt;5) %&gt;% # Sort in descending order in y arrange(desc(y)) <code></code> Note that all code in the fill_in block is commented out and starts with <code>#</code> followed by a space. That is by design because the <code>___</code> make the code syntactically incorrect. If the code would not be commented out, you would have trouble creating your problem set. When the chunk is shown to the user, the comments will be removed. RTutor can then deal with the incorrect R Syntax. Automatic hints don’t work well with syntactically incorrect code. Therefore it is recommended to add a custom chunk hint at the beginning, that always will be shown (see below for custom hints).</p>
</div>
<div id="custom-hints" class="section level2">
<h2 class="hasAnchor">
<a href="#custom-hints" class="anchor"></a>Custom hints</h2>
<p>RTutor tries to generate automatic hints that look at the students solution and try to give some advice while not telling too much. In particular, for very simple tasks the hint may reveal too much. For example, the automatic hint already tells the student the name of the function. (Often it is much harder to find the correct function arguments, though.)</p>
<pre><code>hint()

You must call the function 'mean' in part a).</code></pre>
<p>In our example, we want instead a manual hint that tells the student, how the internet is a very powerful source of information to find R commands for specific tasks. We include such a manual hint in our solution file as follows:</p>
<pre><code>    # Problemset Example 

    ... chunk to generate problem sets is omitted ...

    ## Exercise 1 -- Summary statistics
    
    a) We often want to compute some summary statistics of a vector.
    For example:
    ```{r}
    #&lt; task
    x = 10:20
    # Computing the sum of x
    sum(x)
    #&gt; task
    ```
    Now compute the mean of x.
    ```{r}
    mean(x)
    #&lt; hint
    display("Use Google, e.g. search for 'R compute mean'.")
    #&gt;
    ```</code></pre>
<p>This means we simply add after the command of the solution that will be tested, a block of the form</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode s"><code class="sourceCode gnuassembler"><a class="sourceLine" id="cb18-1" title="1">    <span class="co">#&lt; hint</span></a>
<a class="sourceLine" id="cb18-2" title="2">    </a>
<a class="sourceLine" id="cb18-3" title="3">    <span class="co">#&gt;</span></a></code></pre></div>
<p>Inside the block, you enter some code that will be shown if the student types hint() after the test for the command failed. Often this will simply be a message, but you could also do other things, e.g. showing a plot as hint. Note that the hint code will be evaluated in an environment that contains all variables the student has defined earlier.</p>
<p>Sometimes you want to show the advice from the automatically generated hint but also want to add some additional advice. You can do this by putting code inside the following block:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode s"><code class="sourceCode gnuassembler"><a class="sourceLine" id="cb19-1" title="1">    <span class="co">#&lt; add_to_hint</span></a>
<a class="sourceLine" id="cb19-2" title="2">    </a>
<a class="sourceLine" id="cb19-3" title="3">    <span class="co">#&gt;</span></a></code></pre></div>
</div>
<div id="adaptive-custom-hints" class="section level2">
<h2 class="hasAnchor">
<a href="#adaptive-custom-hints" class="anchor"></a>Adaptive Custom Hints</h2>
<p>The hints described above always show the same message, independent of the student’s code. Automatic hints already adapt to the student’s input and from RTutor version 2019.07.23 it is also more simple to make custom hints adaptive.</p>
<p>Here is an example, where the task is to assign the first 100 square numbers to the variable <code>z</code>.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode s"><code class="sourceCode gnuassembler"><a class="sourceLine" id="cb20-1" title="1">z = <span class="kw">1:</span><span class="dv">100</span> * <span class="kw">1:</span><span class="dv">100</span></a>
<a class="sourceLine" id="cb20-2" title="2"><span class="co">#&lt; hint</span></a>
<a class="sourceLine" id="cb20-3" title="3">if (true(identical(z,<span class="kw">1:</span><span class="dv">10</span>*<span class="kw">1:</span><span class="dv">10</span>))) {</a>
<a class="sourceLine" id="cb20-4" title="4">  cat(<span class="st">"Huh, you made a common mistake. Read the task precisely. You shall assign to z the first 100 square numbers, not only all square numbers that are less or equal to 100"</span>)</a>
<a class="sourceLine" id="cb20-5" title="5">} else if (true(length(z)!=<span class="dv">100</span>)) {</a>
<a class="sourceLine" id="cb20-6" title="6">  cat(<span class="st">"Your variable z must have 100 elements, but in your solution z has"</span>, length(z),<span class="st">"elements."</span>)  </a>
<a class="sourceLine" id="cb20-7" title="7">} else {</a>
<a class="sourceLine" id="cb20-8" title="8">  cat(<span class="st">"There is a simple one-line formula to compute the first 100 square numbers. Just combine what you have learned in exercise 2 f) and in exercise 3 b).</span></a>
<a class="sourceLine" id="cb20-9" title="9"><span class="st">")</span></a>
<a class="sourceLine" id="cb20-10" title="10">}</a>
<a class="sourceLine" id="cb20-11" title="11"><span class="co">#&gt;</span></a></code></pre></div>
<p>The code in the hint block will be evaluated in an environment in which all variables defined in earlier solved chunks are known. Also the student’s current code that chunk has been run in a parent environment.</p>
<p>The function <code>true</code> is a robust version of <code>isTRUE</code> that never throws an error, but simply returns <code>FALSE</code> if the expression cannot be evaluated. This is useful, because whether <code>z</code> exists in the hint environment depends on whether the user has defined it in her solution for the chunk or not. A normal call to <code>isTRUE</code> would throw an error if <code>z</code> does not exist.</p>
<p>Here is an example for an adaptive custom hint in an <code>#&lt; add_to_hint</code> block from one of my problem sets:</p>
<blockquote>
<p>Task: Using the command <code>cbind</code>, generate the matrix X of explanatory variable whose first column consists of 1 and the second column consists of p.</p>
</blockquote>
<div class="sourceCode" id="cb21"><pre class="sourceCode s"><code class="sourceCode gnuassembler"><a class="sourceLine" id="cb21-1" title="1">X = cbind(<span class="dv">1</span>,p)</a>
<a class="sourceLine" id="cb21-2" title="2"><span class="co">#&lt; add_to_hint</span></a>
<a class="sourceLine" id="cb21-3" title="3">if (exists(<span class="st">"x"</span>) &amp; !exists(<span class="st">"X"</span>)) {</a>
<a class="sourceLine" id="cb21-4" title="4">  cat(<span class="st">"It looks like you assigned the value to 'x' (lowercase), but you shall assign the value to 'X' (uppercase)."</span>)</a>
<a class="sourceLine" id="cb21-5" title="5">}</a>
<a class="sourceLine" id="cb21-6" title="6"><span class="co">#&gt;</span></a></code></pre></div>
<p>Looking at the logs of students’ solution, it became apparent that many mixed up X with x. The automatic hint did not help for this problem, yet in other cases, it was helpful. So I just wanted to add this specific custom hint to the automatic hint.</p>
</div>
<div id="info-blocks" class="section level2">
<h2 class="hasAnchor">
<a href="#info-blocks" class="anchor"></a>Info blocks</h2>
<p>Info blocks are declared outside of code chunks and start with <code>#&lt; info</code> and end with <code>#&gt;</code>. They allow additional information that will be optionally shown as HTML in the RStudio viewer pane if the user wants to see it. In the shiny version of the problem set they appear as collapsible notes. They are very helpful to keep the main problem set text brief enough, while at the same time allow a wide range of detailed background information. Here is an example:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode md"><code class="sourceCode markdown"><a class="sourceLine" id="cb22-1" title="1">  #&lt; info "useful functions for numeric vectors"</a>
<a class="sourceLine" id="cb22-2" title="2"><span class="bn">    Here are examples for useful R functions</span></a>
<a class="sourceLine" id="cb22-3" title="3"><span class="bn">    ```{r}</span></a>
<a class="sourceLine" id="cb22-4" title="4"><span class="bn">    max(c(1,5,2)) # returns maximum</span></a>
<a class="sourceLine" id="cb22-5" title="5"><span class="bn">    min(c(1,5,2)) # returns minimum</span></a>
<a class="sourceLine" id="cb22-6" title="6"><span class="bn">    </span></a>
<a class="sourceLine" id="cb22-7" title="7"><span class="bn">    sum(c(1,5,2,NA), na.rm=TRUE) # returns sum of all numbers, ignore NA</span></a>
<a class="sourceLine" id="cb22-8" title="8"><span class="bn">    cumsum(c(1,5,2)) # returns cummulated sum</span></a>
<a class="sourceLine" id="cb22-9" title="9"><span class="bn">    diff(c(1,5,2)) # returns the vector of differences</span></a>
<a class="sourceLine" id="cb22-10" title="10"><span class="bn">    ``` </span></a>
<a class="sourceLine" id="cb22-11" title="11">  #&gt;  </a></code></pre></div>
<p>An info block can contain normal text and also code chunks. When the problem set is created all info blocks will be compiled via the knitr and markdown packages to html text. Since info blocks will be complied already when the problem set is created, you cannot used any variables that are declared outside the info block in the info block code chunks. If you want info blocks with code chunks that the user can solve, see the description of <code>notes</code> further below.</p>
</div>
<div id="preknit-blocks-just-knit-as-rmarkdown" class="section level2">
<h2 class="hasAnchor">
<a href="#preknit-blocks-just-knit-as-rmarkdown" class="anchor"></a>preknit blocks (just knit as RMarkdown)</h2>
<p>preknit blocks are declared outside of code chunks and start with <code>#&lt; preknit</code> and end with <code>#&gt;</code>.</p>
<p>Any rmd code inside a preknit block will be knitted at compile-time and shown as usual RMarkdown output in the shiny based version of the problem set. This is very similar to the output of an info block, except that it is not put into a collapsible.</p>
<p>Note that code that was evaluated in an earlier info or preknit block will be available at compile time at later info or preknit blocks, no matter which exercise the blocks are in. If you want just to do some preliminary computations for later info or preknit blocks without showing any output, add a chunk with the chunk option <code>include=FALSE</code> in a preknit block.</p>
<p>preknit blocks typically only make sense, if you use the shiny version of a problem set.</p>
</div>
<div id="giving-awards" class="section level2">
<h2 class="hasAnchor">
<a href="#giving-awards" class="anchor"></a>Giving awards</h2>
<p>Isn’t it amazing when video game players play for hours and hours, doing sometimes quite repetitive and boring tasks, just in order to earn some virtual points or virtual trophies? Well it seems that many people can be motivated, at least to some degree, by such stuff. Since a main motivation for RTutor is to make learning R, as well as statistical and economic concepts, more interesting and more entertaining, it seems natural to borrow some ideas from computer games.</p>
<p>So far there is only a small thing: students can get <strong>awards</strong> if they have solved a problem. The received awards can be shown by typing <code><a href="../reference/awards.html">awards()</a></code> in the R console. Information on the awards is stored in a file with name user_username.ruser in your problem set folder. You can give awards after having solved a chunk by adding after the chunk an award block (the block is declared outside of code chunks), e.g.</p>
<pre><code>  #&lt; award "mean means mean"
  Well, in some occasions one can just guess the name of an R function.
  The function to compute the mean of a vector or matrix
  is called 'mean'.
  Usually, it is much quicker to goggle than 
  to guess function names, however.
  #&gt;</code></pre>
<p>Just write some text inside the block. The title of the award must be set in "".</p>
</div>
<div id="adapting-tests-of-students-solution" class="section level2">
<h2 class="hasAnchor">
<a href="#adapting-tests-of-students-solution" class="anchor"></a>Adapting tests of student’s solution</h2>
<p>I tried my best to automatically test whether the student entered a correct solution or not. Yet, sometimes we need to manually include specific variants of tests in the solution file. Here is an example for such a manual test:</p>
<pre><code>    #' b) Save in the variable u a vector of 4 different numbers
    u = c(3,6,7,99)  
    #&lt; test
    check.variable("u",c(3,6,7,99),values=FALSE)
    #&gt;</code></pre>
<p>The automatic test would check whether one of the following two conditions is meet:</p>
<ul>
<li>u has the same value than in the solution. This means u=c(2,5,6,98)+1 would also pass as correct solution</li>
<li>u is generated by an equivalent call as in the solution (equivalent means the function name should be the same and the arguments should have the same value). This is useful if the solution is a call that generates a random variable like x = runif(1).</li>
</ul>
<p>Yet in this example, the automatic test is too restrictive. The student shall just generate some arbitrary vector consisting of 4 numbers. The block</p>
<pre><code>    #&lt; test
    check.variable("u",c(3,6,7,99),values=FALSE)
    #&gt;</code></pre>
<p>replaces the automatic test with a test that just checks whether a variable u exists, and has the same length and class (numeric or integer) as an example solution c(3,6,7,99).</p>
<p>RTutor has a series of helper functions for such manual tests. Take a look at the package help for a documentation.</p>
</div>
<div id="specifying-parameters-of-default-tests" class="section level2">
<h2 class="hasAnchor">
<a href="#specifying-parameters-of-default-tests" class="anchor"></a>Specifying parameters of default tests</h2>
<p>By default, tests are generated that call either <code>check.call</code> (a statement that does not assign a variable), <code>check.assign</code> (if a value is assigned to a variable), or <code>check.function</code> (if a function is generated). You can take a look at the generated _struc.r file to see which default and manual tests are generated. All test function have a number of arguments, that allow to customize the tests. A block starting with the line <code>#&lt; test_arg</code> allows you to change the arguments of a default test. Consider the following example:</p>
<pre><code>    plot(x=p,y=q,main="A plot", xlab="Prices")
    #&lt; test_arg
      ignore.arg = c("main","xlab")
      allow.extra.arg=TRUE
    #&gt;</code></pre>
<p>The <code>#&lt; test_arg</code> block customizes the parameters <code>ignore.arg</code> and <code>allow.extra.arg</code> of the <code>check.call</code> function. The parameter <code>ignore.arg = c("main","xlab")</code> means that the student does not have to add these two arguments to the plot function or can use different values. The parameter <code>allow.extra.arg=TRUE</code> allows the student to specify additional arguments when calling plot, e.g. specifying a <code>ylab</code>. So essentially, it will now only be tested whether the x and y arguments of the plot are correct and any customization of the plot will still be considered a correct solution. See the help of <code>check.call</code> for a description of arguments.</p>
<p>If the sample solution assigns a value to a variable, the default function is <code>check.assign</code>. See its help file for possible arguments.</p>
</div>
<div id="using-variables-from-earlier-exercises-not-recommended" class="section level2">
<h2 class="hasAnchor">
<a href="#using-variables-from-earlier-exercises-not-recommended" class="anchor"></a>Using variables from earlier exercises (NOT RECOMMENDED)</h2>
<p>By default variables that have been generated by the student in earlier exercises are not known in the current exercise.</p>
<p>It is possible to use variables from earlier exercises, but that is not recommended, because then one can only start with a new exercise if the previous has been solved. Better make each exercise self-contained.</p>
<p>Nevertheless here is an example, how one could do it.</p>
<pre><code>    ## Exercise 2 -- Computing with vectors
    
    ```{r}
    #&lt; settings
    import.var = list("1"="x")
    #&gt;
    ```
    a) Let y be a vector that contains the squared elements of x. Show y
    ```{r}
    y = x^2
    y
    ```</code></pre>
<p>As you see, in order to use variables from earlier exercises, you must add at the beginning of an exercise a settings block that defines a variable <code>import.var</code>, like</p>
<pre><code>    ```{r}
    #&lt; settings
    import.var = list("1"="x")
    #&gt;
    ```</code></pre>
<p>The variable <code>import.var</code> is a list whose element names correspond to the short exercise names (part of the name before –) from which you want to import variables. The list elements are character vectors of the variable names you want to import from the corresponding exercise.</p>
</div>
</div>
<div id="examples-and-tipps-for-creating-tests-and-hints" class="section level1">
<h1 class="hasAnchor">
<a href="#examples-and-tipps-for-creating-tests-and-hints" class="anchor"></a>Examples and tipps for creating tests and hints</h1>
<div id="iteratively-refining-hints-and-the-problem-set" class="section level2">
<h2 class="hasAnchor">
<a href="#iteratively-refining-hints-and-the-problem-set" class="anchor"></a>Iteratively Refining Hints and the Problem Set</h2>
<p>The companion package <a href="https://github.com/skranz/RTutorSAGI">RTutorSAGI</a> allows to study logs of students’ submitted solutions. One can see were were students systematically got stuck and can adapt the problem set structure and hints correspondingly. Take a look at the README.md of that package.</p>
</div>
<div id="testing-a-function-written-by-the-student" class="section level2">
<h2 class="hasAnchor">
<a href="#testing-a-function-written-by-the-student" class="anchor"></a>Testing a function written by the student</h2>
<p>Sometimes you may ask to write a function in the problem set. Here is an example, how you could construct a solution file. In the exercise the student is asked to complete a manual function <code>ols</code> that shall compute an ols estimate:</p>
<pre><code>    #&lt; task_notest
    ols = function(y,X) {
      
      # enter code to compute beta.hat here ...
      
      return(as.numeric(beta.hat))
    }
    #&gt; task
    
    ols &lt;- function(y,X) {
      beta.hat = solve(t(X) %*% X) %*% t(X) %*% y
      return(as.numeric(beta.hat))
    }
    #&lt; test_arg
      ols(c(100,50,20,60),cbind(1,c(20,30,15,20)))
      hint.name="ols"
    #&gt;
    #&lt; hint
    display("Just insert inside the function ols the code to compute beta.hat",
            "from y and X. You have developed this code in Exercise 1.")
    #&gt;</code></pre>
<p>First, we have a <code>#&lt; task_notest</code> block that specifies an unfinished function that will be given to the student. Afterward, we have an example of a correct function <code>ols</code>. Then the <code>#&lt; test_arg</code> block specifies parameters for the automatic test <code>check.function</code>. The unnamed parameter</p>
<pre><code>    ols(c(100,50,20,60),cbind(1,c(20,30,15,20)))</code></pre>
<p>Specifies a test call. <code>check.function</code> will run this test call for the official solution and the student’s solution. The test will only pass if both versions return the same value. The parameter hint.name specifies a manual name for a hint, since currently no automatic hints are generated for function creation (hopefully that will improve in later versions of RTutor.) Finally, the <code>#&lt; hint ols</code> specifies what the hint <code>ols</code> shows.</p>
</div>
<div id="testing-a-function-that-generates-random-variables" class="section level2">
<h2 class="hasAnchor">
<a href="#testing-a-function-that-generates-random-variables" class="anchor"></a>Testing a function that generates random variables</h2>
<p>In the moment there is relatively little support to check user written functions that generate random variables, and I hope this will improve with newer versions of RTutor. What currently can be done to compare the results of the student’s function and the official solution using the same random seed.</p>
<p>Here is an example:</p>
<pre><code>    a) Write a function `runif.square` with parameters n, min and max
    that generates n random variables that are the square of variables
    that are uniform distributed on the interval from min to max.
    
    ```{r}
    runif.square = function(n,min,max) {
      runif(n,min,max)^2
    }
    #&lt; test_arg
      with.random.seed(runif.square(n=20,min=4,max=9), seed=12345)
    #&gt;
    ```</code></pre>
<p>Our test call is now embedded in the function with.random.seed that calls the function with a fixed random seed. The test check.function only passes if the students function and official solution return the same value when called with the same random seed.</p>
<p>If a function requires simulation of more than one random number, this testing procedure only works if the student draws the random numbers in the same order than the official solution. This means your task should specify already a lot of structure for the function and tell the student not to draw any additional random variables inside the function.</p>
</div>
<div id="test-if-variables-that-satisfy-specific-conditions-are-generated" class="section level2">
<h2 class="hasAnchor">
<a href="#test-if-variables-that-satisfy-specific-conditions-are-generated" class="anchor"></a>Test if variables that satisfy specific conditions are generated</h2>
<p>Consider the following example:</p>
<pre><code>    a) Specify a number of observations T&gt;=5
    
    ```{r }
    T = 100
    #&lt; test
      check.variable("T",100,values=FALSE)
      holds.true(T&gt;=5, failure.message="You must set T&gt;=5.")
    #&gt;
    ```</code></pre>
<p>The default test <code>check.assign</code> would only pass if the student would set <code>T=100</code>, but any T&gt;=5 shall be considered correct. So we first replace the default test by a <code>check.variable</code> test that checks whether a numeric variable T of length 1 exists. Then we add another manual test <code>holds.true</code> that checks whether T&gt;=5 holds. Note that using the holds.true test without first checking that a numeric, variable T of length 1 exists can cause the holds.true test to crash.</p>
</div>
</div>
<div id="some-more-advanced-features" class="section level1">
<h1 class="hasAnchor">
<a href="#some-more-advanced-features" class="anchor"></a>Some more advanced features</h1>
<div id="dplyr-chains-with-pipe-operator" class="section level2">
<h2 class="hasAnchor">
<a href="#dplyr-chains-with-pipe-operator" class="anchor"></a>dplyr chains with pipe operator <code>%&gt;%</code>
</h2>
<p>The pipe operator <code>%&gt;%</code> allows to create command chains. This is particularly often used with dplyr verbs. For example:</p>
<pre><code>    ```{r "5 d)"}
    d %&gt;%
      group_by(ye,ma) %&gt;%
      summarise(Q=sum(qu)/1e6) %&gt;%
      arrange(-ye,Q)
      
    ```</code></pre>
<p>RTutor tries to automatically generate useful hints, if the user makes an error in such chains. The hints try to establish where in the chain the error has occured and to guide the user step by step. This does not (yet) work perfectly in all instances, however. (For example, errors in group by are typically detected only later, so far). While you cannot specify manual hints for particular steps in the chain, you can add a global hint with an <code>&lt;# add_to_hint</code> block.</p>
</div>
<div id="check-computations-that-involve-several-steps-with-compute-blocks" class="section level2">
<h2 class="hasAnchor">
<a href="#check-computations-that-involve-several-steps-with-compute-blocks" class="anchor"></a>Check computations that involve several steps with compute blocks</h2>
<p>Sometimes you want to ask students to perform computations that will usually require several steps. One example are dplyr chains, as explained above. But there are other forms of multistep computations. Two somewhat opposite ways of implementing such multistep computations in a problem set would be the following:</p>
<ol style="list-style-type: lower-roman">
<li>Only check the final result and let the student figure out the intermediate steps herself.</li>
<li>Include all intermediate steps as part of the problem set</li>
</ol>
<p>A <code>#&lt; compute ... #&gt;</code> block allows an intermediate approach. Here is an example from a problem set of mine that asks a student to compute a matrix of choice probabilities from a conditional logit model.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode s"><code class="sourceCode gnuassembler"><a class="sourceLine" id="cb34-1" title="1">    <span class="co">#&lt; compute P</span></a>
<a class="sourceLine" id="cb34-2" title="2">    </a>
<a class="sourceLine" id="cb34-3" title="3">    <span class="co">## Take a look at the formula for the choice probabilities P.nj of the logit discrete choice model in the slides.</span></a>
<a class="sourceLine" id="cb34-4" title="4">    </a>
<a class="sourceLine" id="cb34-5" title="5">    <span class="co">## Let exp.V be a matrix that contains the numerators of P.nj (use scale as sigma in your formula)</span></a>
<a class="sourceLine" id="cb34-6" title="6">    exp.V = exp(V/scale)</a>
<a class="sourceLine" id="cb34-7" title="7">    </a>
<a class="sourceLine" id="cb34-8" title="8">    <span class="co">## Let sum.exp.V be a vector that contains for each person n the denominator in P.nj. You can use the function 'rowSums'. </span></a>
<a class="sourceLine" id="cb34-9" title="9">    sum.exp.V = rowSums(exp.V)</a>
<a class="sourceLine" id="cb34-10" title="10">    </a>
<a class="sourceLine" id="cb34-11" title="11">    <span class="co">## Compute P as ratio of the numerator and the denominator</span></a>
<a class="sourceLine" id="cb34-12" title="12">    P = exp.V / sum.exp.V</a>
<a class="sourceLine" id="cb34-13" title="13">    <span class="co">#&gt;</span></a></code></pre></div>
<p>The solution will pass as correct if the final values of <code>P</code> are correct. The student is not obliged to perform the particular intermediate computations like <code>exp.V</code>. Yet, if the student has not yet correctly computed <code>P</code> and types <code><a href="../reference/hint.html">hint()</a></code>, the hint function tries to steer the student step by step through the sample solution described in the block. The comments starting with <code>##</code> will be transformed into text that will be shown in the hint.</p>
</div>
<div id="chunks-with-html-output" class="section level2">
<h2 class="hasAnchor">
<a href="#chunks-with-html-output" class="anchor"></a>Chunks with HTML output</h2>
<p>You can specify chunks whose output is native HTML code, e.g. if you want to show an HTML table or show a motion plot. As in normal rmarkdown, you can do so by setting the chunk option <code>results= "asis"</code>. Here is an example from an interactive problem set that shows a motion plot:</p>
<p><code></code>{r “2_1_a_example”, results = ‘asis’} #&lt; task library(googleVis) mp = gvisMotionChart(Int.data, idvar = “country”, timevar = “year”) plot(mp, tag = “chart”) #&gt; <code></code></p>
<p>There are a lot of R packages that help creating nice HTML tables, like <code>stargazer</code>, or <code>hwriter</code>.</p>
</div>
<div id="chunks-with-html-widgets-as-outputs" class="section level2">
<h2 class="hasAnchor">
<a href="#chunks-with-html-widgets-as-outputs" class="anchor"></a>Chunks with HTML Widgets as outputs</h2>
<p>It is also possible to have chunks that have HTML widgets as output. If you use the shiny based version of RTutor you then need some additional chunk options. Here is an example for the leaflet widget:</p>
<p><code></code>{r output=“htmlwidget”, widget=“leaflet”} #&lt; task_notest SFmap &lt;- leaflet() %&gt;% addTiles() %&gt;% setView(9.9620289,48.4251394, zoom = 11) %&gt;% addMarkers(9.963614702355699,48.42517242865929, popup = ‘RTutor was created here at Ulm University’) SFmap #&gt; <code></code></p>
<p>The <code>widget</code> argument is typically the name of the R package in which the html widget is specified.</p>
</div>
<div id="specifying-figure-width-and-height" class="section level2">
<h2 class="hasAnchor">
<a href="#specifying-figure-width-and-height" class="anchor"></a>Specifying figure width and height</h2>
<p>If your chunk plots a figure, you may want to specify the width and height of the resulting figure. You can do this with the chunk options <code>fig.width</code> and <code>fig.height</code> that specify width and height in inches.</p>
<p><code></code>{r “1_a”, fig.width=12, fig.height=5} #&lt; task plot(1:10,(1:10)^2) #&gt; <code></code></p>
<p>You can also specify chunk options of the <code>knitr</code> package. An overview is given here:</p>
<p><a href="http://yihui.name/knitr/options/">http://yihui.name/knitr/options/</a></p>
</div>
<div id="optional-chunks" class="section level2">
<h2 class="hasAnchor">
<a href="#optional-chunks" class="anchor"></a>Optional chunks</h2>
<p>By default you have to solve all chunks in an exercise in the given order. If you set the chunk option <code>optional=TRUE</code>, a chunk may not be solved. Example:</p>
<p><code></code>{r “1_b”, optional = TRUE} # Code here</p>
<pre><code></code></pre>
<p>This is in particular useful if you use notes that contain chunks. Note that variables that have been computed in optional chunks will not be known in later chunks.</p>
<p>Note that <code>optional</code> is not a chunk option known by <code>knitr</code> but only used for RTutor.</p>
</div>
<div id="notes-or-info-blocks-that-can-contain-chunks" class="section level2">
<h2 class="hasAnchor">
<a href="#notes-or-info-blocks-that-can-contain-chunks" class="anchor"></a>Notes – Or info blocks that can contain chunks</h2>
<p>The simplest way to add notes / footnotes is to use an info block as described above, with a block:</p>
<pre><code>#&lt; info "Title"
Description here and code that will be compiled beforehand.
#&gt;</code></pre>
<p>Info blocks cannot include chunks, however. There is a new feature of RTutor that allows notes that contain optional chunks. Here is an example:</p>
<pre><code>    #! start_note "A note with a chunk"
    This is a note.
    
    ```{r "1_1  6",optional=TRUE}
    #&lt; task
    # show that all integers between 0 and 10
    #&gt;
    1:10
    ```
    #! end_note </code></pre>
<p>Everything between the lines</p>
<p><code>#! start_note "Title"</code></p>
<p>and</p>
<p><code>#! end_note</code></p>
<p>will be shown in a note. Chunks inside the note can be solved by users. They should have <code>optional=TRUE</code> in the chunk header. Beware that RTutor is not (yet) very good in giving sensible failure messages, if you make mistakes, like forgetting the <code>#! end_note</code> line.</p>
</div>
</div>
<div id="commonly-occuring-errors" class="section level1">
<h1 class="hasAnchor">
<a href="#commonly-occuring-errors" class="anchor"></a>Commonly occuring errors</h1>
<ul>
<li>
<p>Problem: When I run <code>create.ps</code> I get the following error message:</p>
<pre><code>Error in nchar(paste0(code, collapse = "\n")) :
  invalid multibyte string, element 1</code></pre>
<ul>
<li>Answer: This is a nasty error that has to do with the <em>encoding</em> of your text file. Try the following with your _sol.Rmd file. In RStudio choose the menu <code>File -&gt; Reopen with encoding</code>. Then pick the Encoding <code>UTF-8</code> and press ok. Now make some small changes in your file, save it and try again to run <code>create.ps</code>. Hopefully it now works…</li>
</ul>
</li>
<li>Problem: I change my _sol.Rmd file run <code>create.ps</code> and <code>show.ps</code>, the browser opens but the changes do not appear in the shown problem set.
<ul>
<li>Answer: Make sure that you have correctly set the working directory with <code>setwd</code> to the folder in which your _sol.Rmd file is stored.</li>
</ul>
</li>
</ul>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li>
<a href="#brief-overview">Brief overview</a><ul class="nav nav-pills nav-stacked">
<li><a href="#rtutor">RTutor</a></li>
      <li><a href="#install-the-newest-version-of-rtutor">Install the newest version of RTutor</a></li>
      <li><a href="#create-an-r-markdown-solution-file">Create an R Markdown solution file</a></li>
      <li><a href="#generate-a-structure-file-and-empty-problem-set-for-students">Generate a structure file and empty problem set for students</a></li>
      <li><a href="#solving-and-checking-the-problem-set">Solving and checking the problem set</a></li>
      <li><a href="#iterative-development">Iterative Development</a></li>
      <li><a href="#distributing-your-problem-set">Distributing your problem set</a></li>
      </ul>
</li>
      <li>
<a href="#basic-elements-of-solution-files">Basic elements of solution files</a><ul class="nav nav-pills nav-stacked">
<li><a href="#an-example-problem-set">An example problem set</a></li>
      <li><a href="#problemset-header">Problemset header</a></li>
      <li><a href="#exercise-header">Exercise header</a></li>
      <li><a href="#parts-a-b">parts a), b) …</a></li>
      <li><a href="#task-blocks">task blocks</a></li>
      <li><a href="#task_notest-blocks">task_notest blocks</a></li>
      <li><a href="#fill_in-blocks">fill_in blocks</a></li>
      <li><a href="#custom-hints">Custom hints</a></li>
      <li><a href="#adaptive-custom-hints">Adaptive Custom Hints</a></li>
      <li><a href="#info-blocks">Info blocks</a></li>
      <li><a href="#preknit-blocks-just-knit-as-rmarkdown">preknit blocks (just knit as RMarkdown)</a></li>
      <li><a href="#giving-awards">Giving awards</a></li>
      <li><a href="#adapting-tests-of-students-solution">Adapting tests of student’s solution</a></li>
      <li><a href="#specifying-parameters-of-default-tests">Specifying parameters of default tests</a></li>
      <li><a href="#using-variables-from-earlier-exercises-not-recommended">Using variables from earlier exercises (NOT RECOMMENDED)</a></li>
      </ul>
</li>
      <li>
<a href="#examples-and-tipps-for-creating-tests-and-hints">Examples and tipps for creating tests and hints</a><ul class="nav nav-pills nav-stacked">
<li><a href="#iteratively-refining-hints-and-the-problem-set">Iteratively Refining Hints and the Problem Set</a></li>
      <li><a href="#testing-a-function-written-by-the-student">Testing a function written by the student</a></li>
      <li><a href="#testing-a-function-that-generates-random-variables">Testing a function that generates random variables</a></li>
      <li><a href="#test-if-variables-that-satisfy-specific-conditions-are-generated">Test if variables that satisfy specific conditions are generated</a></li>
      </ul>
</li>
      <li>
<a href="#some-more-advanced-features">Some more advanced features</a><ul class="nav nav-pills nav-stacked">
<li><a href="#dplyr-chains-with-pipe-operator">dplyr chains with pipe operator <code>%&gt;%</code></a></li>
      <li><a href="#check-computations-that-involve-several-steps-with-compute-blocks">Check computations that involve several steps with compute blocks</a></li>
      <li><a href="#chunks-with-html-output">Chunks with HTML output</a></li>
      <li><a href="#chunks-with-html-widgets-as-outputs">Chunks with HTML Widgets as outputs</a></li>
      <li><a href="#specifying-figure-width-and-height">Specifying figure width and height</a></li>
      <li><a href="#optional-chunks">Optional chunks</a></li>
      <li><a href="#notes-or-info-blocks-that-can-contain-chunks">Notes – Or info blocks that can contain chunks</a></li>
      </ul>
</li>
      <li><a href="#commonly-occuring-errors">Commonly occuring errors</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Sebastian Kranz.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
